TOSMAKE_PATH=../support/make/

COMPONENT=GlobalTestAppC

CFLAGS += -DCC2420_DEF_RFPOWER=27
CFLAGS += -DCC2420_DEF_CHANNEL=17
CFLAGS += -DACK_LOW_POWER_LISTENING
MSG_SIZE = 94


PFLAGS += -DCTP_CLEAR
PFLAGS += -DLPL_COEXISTENCE
PFLAGS += -DCTP_REPORT
PFLAGS += -DRADIO_ACTIVATIONS

CFLAGS += -IroutingTest/common \
	  -IroutingTest/common/routingInfo \
	  -IPLR
# PFLAGS += -DCTP_RADIO_SETTINGS

#CFLAGS += -DLOW_POWER_LISTENING

####### ORW DEFINES
ifdef OL_CUSTOM_LPL
CFLAGS += -DLPL_DEF_LOCAL_WAKEUP=$(OL_CUSTOM_LPL)
CFLAGS += -DLPL_DEF_REMOTE_WAKEUP=$(OL_CUSTOM_LPL)
else
CFLAGS += -DLPL_DEF_LOCAL_WAKEUP=2048
CFLAGS += -DLPL_DEF_REMOTE_WAKEUP=2048
endif

ifdef OL_CUSTOM_PR
CFLAGS += -DTEST_NETWORK_PACKET_RATE=$(OL_CUSTOM_PR)
else
CFLAGS += -DTEST_NETWORK_PACKET_RATE=4096
endif

ifdef OL_CUSTOM_CH
CFLAGS += -DCC2420_DEF_CHANNEL=$(OL_CUSTOM_CH)
endif

ifdef OL_CUSTOM_W
CFLAGS += -DOPP_EDC_TX_PENALTY=$(OL_CUSTOM_W)
endif

ifdef OL_CUSTOM_TABLE_SIZE
CFLAGS += -DOPP_NB_TABLE_SIZE=$(OL_CUSTOM_TABLE_SIZE)
endif

ifdef OL_CUSTOM_ACK_WAIT
CFLAGS += -DOPP_ACK_WAIT=$(OL_CUSTOM_ACK_WAIT) -DDELAY_AFTER_RECEIVE=10
endif

ifdef OL_CHURN
CFLAGS += -DCHURN  
endif

ifdef OL_SINK
CFLAGS += -DSINK_ID=$(OL_SINK)
endif

ifdef OL_CUSTOM_PW
CFLAGS += -DCC2420_DEF_RFPOWER=$(OL_CUSTOM_PW)
endif

###### END ORW DEFINES

ifdef LSLEEP
CFLAGS += -DLOCAL_SLEEP=$(LSLEEP)
endif

ifeq ($(OBJECTIVE),SINK)
CFLAGS += -IroutingTest/sink_node 
CFLAGS += -DSERIAL_FW
endif

ifeq ($(OBJECTIVE),WINE_SINK)
CFLAGS += -IroutingTest/sink_node
#CFLAGS += -DALTERNATE_RADIO_FLASH
CFLAGS += -DMSG_LOGGER
endif

ifeq ($(OBJECTIVE),NET)
CFLAGS += -IroutingTest/net_node
endif

ifeq ($(OBJECTIVE),BRIDGE_SINK)
CFLAGS += -DROUTING_NODE
CFLAGS += -DSERIAL_FW
CFLAGS += -IroutingTest/bridge_node 
endif

ifeq ($(OBJECTIVE),BRIDGE)
CFLAGS += -DROUTING_NODE
CFLAGS += -IroutingTest/bridge_node 
endif

# CFLAGS += -DPRINTF_SUPPORT
# CFLAGS += -I$(TOSDIR)/lib/printf
# BUILD_EXTRA_DEPS += PrintfMsg.class PrintfClient.class
# %.class: %.java 
# 	javac $<

include $(MAKERULES)

